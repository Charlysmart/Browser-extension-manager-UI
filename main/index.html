<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../dist/output.css">
    <link rel="stylesheet" href="../dist/styles.css">
    

    <title>Extensions</title>
</head>
<body class="bg-blue-100 dark:bg-blue-950 px-0">
    <div class="overlay hidden bg-black/30 h-screen absolute w-full left-0 z-5"></div>
    <div class="container mx-auto py-10 lg:px-30 px-7 h-screen overflow-auto">
        <div class="bg-white dark:bg-gray-700 rounded-xl shadow-md border-2 border-gray-200 dark:border-0 w-full px-2 py-2 flex justify-between items-center mb-7">
            <div class="logo">
                <img src="../assets/images/logo-dark.svg" class="w-40 dark:hidden" alt="">
                <img src="../assets/images/logo-light.svg" class="w-40 hidden dark:block" alt="">
            </div>
            <div class="mode flex">
                <div class="moon bg-gray-200 p-2 rounded-lg dark:hidden">
                    <img src="../assets/images/icon-moon.svg" alt="">
                </div>
                <div class="sun bg-gray-600 p-2 rounded-lg hidden dark:block">
                    <img src="../assets/images/icon-sun.svg" alt="">
                </div>
            </div>
        </div>
        <section class="container mx-auto">
            <div class="flex flex-col lg:flx-row space-y-5 justify-between items-center mb-7">
                <h2 class="text-blue-950 dark:text-white font-bold text-2xl">Extensions List</h2>
                <div>
                    <button class="bg-orange-700 dark:bg-gray-600 dark:bg-orange-700 py-1 px-4 text-white dark:text-white hover:outline hover:outline-orange-700 rounded-full filter shadow-md" id="all" onclick="toggleIsActive(this)">All</button>
                    <button class="bg-white dark:bg-gray-600 hover:outline hover:outline-orange-700 dark:text-white py-1 px-4 text-gray-500 rounded-full filter shadow-md font-medium" id="active" onclick="toggleIsActive(this)">Active</button>
                    <button class="bg-white dark:bg-gray-600 hover:outline hover:outline-orange-700 dark:text-white py-1 px-4 text-gray-500 rounded-full filter shadow-md font-medium" id="inactive" onclick="toggleIsActive(this)">Inactive</button>
                </div>
            </div>
            <div class="extension-list space-y-4 lg:grid lg:grid-cols-3 gap-3" id="extensionList"></div>
        </section>
    </div>
    <div class="confirmation flex hidden items-center w-full h-screen justify-center z-10 absolute top-0">
        <div class="bg-yellow-100 h-fit w-fit py-10 px-10 rounded-lg shadow-md">
            <h1 class="font-medium text-lg underline text-center">Delete Extension</h1>
            <p>Do you really want to delete this extension?</p>
            <div class="flex justify-center space-x-4 items-center mt-4">
                <button class="delete bg-orange-700 rounded-md py-1 px-3 text-white text-lg font-medium" onclick="removeData(this)">Delete</button>
                <button class="bg-orange-700 rounded-md py-1 px-3 text-white text-lg font-medium" onclick="cancel()">Cancel</button>
            </div>
        </div>
    </div>
    <script>
        let extensionList = document.getElementById('extensionList');
        let fullList = [
            {
                "logo": "./assets/images/logo-devlens.svg",
                "name": "DevLens",
                "description": "Quickly inspect page layouts and visualize element boundaries.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-style-spy.svg",
                "name": "StyleSpy",
                "description": "Instantly analyze and copy CSS from any webpage element.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-speed-boost.svg",
                "name": "SpeedBoost",
                "description": "Optimizes browser resource usage to accelerate page loading.",
                "isActive": false
            },
            {
                "logo": "./assets/images/logo-json-wizard.svg",
                "name": "JSONWizard",
                "description": "Formats, validates, and prettifies JSON responses in-browser.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-tab-master-pro.svg",
                "name": "TabMaster Pro",
                "description": "Organizes browser tabs into groups and sessions.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-viewport-buddy.svg",
                "name": "ViewportBuddy",
                "description": "Simulates various screen resolutions directly within the browser.",
                "isActive": false
            },
            {
                "logo": "./assets/images/logo-markup-notes.svg",
                "name": "Markup Notes",
                "description": "Enables annotation and notes directly onto webpages for collaborative debugging.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-grid-guides.svg",
                "name": "GridGuides",
                "description": "Overlay customizable grids and alignment guides on any webpage.",
                "isActive": false
            },
            {
                "logo": "./assets/images/logo-palette-picker.svg",
                "name": "Palette Picker",
                "description": "Instantly extracts color palettes from any webpage.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-link-checker.svg",
                "name": "LinkChecker",
                "description": "Scans and highlights broken links on any page.",
                "isActive": true
            },
            {
                "logo": "./assets/images/logo-dom-snapshot.svg",
                "name": "DOM Snapshot",
                "description": "Capture and export DOM structures quickly.",
                "isActive": false
            },
            {
                "logo": "./assets/images/logo-console-plus.svg",
                "name": "ConsolePlus",
                "description": "Enhanced developer console with advanced filtering and logging.",
                "isActive": true
            }
        ];
        document.addEventListener('DOMContentLoaded', () => {
            fullList.forEach(info => {
                createCard(info, toggleActive);
            });
            });
        activeElement = null;
        function toggleIsActive(element) {
            document.getElementById('all').classList.remove('dark:bg-orange-700');
            document.getElementById('all').classList.remove('bg-orange-700');
            if (activeElement) {
                activeElement.classList.remove('dark:bg-orange-700');
                activeElement.classList.remove('bg-orange-700');
            }
            element.classList.add('dark:bg-orange-700');
            element.classList.add('bg-orange-700');
            activeElement = element;               
            let state;
            let all;
            if (element.id === 'active') {
                state = true;
            } else if (element.id === 'inactive') {
                state = false;
            } else {
                state = 'all';
            }
            console.log(state);
                extensionList.innerHTML = '';
                console.log(fullList);
                let filteredItems;
                if (state === 'all') {
                    filteredItems = fullList;
                    filteredItems.forEach(info => {
                        createCard(info, toggleActive);
                    });
                    console.log('hello');
                    
                } else {
                    filteredItems = fullList.filter(item => item.isActive === state);
                    filteredItems.forEach(filtered => {
                        console.log(filtered.isActive)
                        if (filtered.isActive === state) {
                            createCard(filtered, toggleActive);
                        }
                    });
                }
            }  

        function createCard(info, toggleHandles) {
            let card = document.createElement('div');
            card.classList.add('card', 'rounded-xl', 'bg-white', 'dark:bg-gray-700', 'dark:border-1', 'dark:text-white', 'shadow', 'p-4', 'border', 'h-50', 'border-gray-200', 'dark:border-gray-100');
            let topSection = document.createElement('div');
            topSection.classList.add('top-section', 'flex', 'h-35', 'space-x-4');
            let cardImage = document.createElement('div');
            cardImage.classList.add('card-image', 'mt-1', 'w-30');
            let Image = document.createElement('img');
            Image.src = `../${info.logo}`;
            let cardBody = document.createElement('div');
            cardBody.classList.add('card-body');
            let headerName = document.createElement('h3');
            headerName.classList.add('text-blue-950', 'dark:text-white', 'font-bold', 'text-2xl', 'mt-0', 'mb-3');
            headerName.textContent = info.name;
            let text = document.createElement('p');
            text.classList.add('font-sanBold', 'font-normal', 'mb-10');
            text.textContent = info.description;
            let meta = document.createElement('div');
            meta.classList.add('flex', 'justify-between', 'items-center', 'meta');
            let remove = document.createElement('p');
            remove.classList.add('border', 'border-gray-300', 'px-4', 'py-1', 'text-blue-950', 'dark:text-white', 'dark:hover:text-blue-950', 'rounded-full', 'font-medium', 'hover:bg-orange-700', 'transition', 'duration-300', 'cursor-pointer', 'hover:border-0');
            remove.textContent = 'Remove';
            remove.onclick = () => removeDataConfirmation(info.name)
            let toggleContainer = document.createElement('div');
            toggleContainer.classList.add('toggle-active', 'w-10', 'h-6', 'border', 'border-gray-300', 'p-[2px]', 'rounded-full');
            let toggleBall = document.createElement('div');
            toggleBall.classList.add('bg-white', 'h-full', 'w-[50%]', 'rounded-full', 'transform');
            if (info.isActive === true) {
                toggleContainer.classList.add('bg-orange-700');
                toggleBall.classList.add('translate-x-[100%]');
            }
            else {
                toggleContainer.classList.add('bg-gray-300');
                toggleBall.classList.add('translate-x-[0%]');
            }
            toggleContainer.onclick = () => toggleHandles(info, toggleContainer, toggleBall);     

            cardImage.appendChild(Image);
            cardBody.appendChild(headerName);
            cardBody.appendChild(text);
            topSection.appendChild(cardImage);
            topSection.appendChild(cardBody);
            toggleContainer.appendChild(toggleBall);
            meta.appendChild(remove);                    
            meta.appendChild(toggleContainer);                    
            card.appendChild(topSection);
            card.appendChild(meta);
            extensionList.appendChild(card);
        }

        function toggleActive(info, toggleContainer, toggleBall) {
            toggleBall.classList.toggle('translate-x-[100%]');
            const isNowActive = toggleContainer.classList.toggle('bg-orange-700');
            toggleContainer.classList.toggle('bg-gray-300', !isNowActive);
            info.isActive = isNowActive;
        }

        
        let overlay = document.querySelector(".overlay");
        let confirmation = document.querySelector(".confirmation");
        function removeDataConfirmation(value) {
            let deleteBtn = document.querySelector('.delete');
            console.log(value);
            deleteBtn.id = value;
            console.log(deleteBtn);
            document.documentElement.style.overflow = 'hidden';
            overlay.classList.remove('hidden');
            confirmation.classList.remove('hidden');
        }


        
        function cancel() {
            document.documentElement.style.overflow = 'auto';
            overlay.classList.add('hidden');
            confirmation.classList.add('hidden');            
        }
        
        function removeData(value) {
            fullList = fullList.filter(item => item.name !== value.id);
            extensionList.innerHTML = ''; 
            fullList.forEach(info => {
                document.documentElement.style.overflow = 'auto';
                overlay.classList.add('hidden');
                confirmation.classList.add('hidden');            
                createCard(info, toggleActive);
            });
        }



        // toggle mode
        const html = document.documentElement;
        const moonBtn = document.querySelector('.moon');
        const sunBtn = document.querySelector('.sun');


        const theme = localStorage.getItem('theme');
        if (theme === 'dark') {
            html.classList.add('dark');
        }
        moonBtn.addEventListener('click', () => {
        html.classList.add('dark');
        localStorage.setItem('theme', 'dark');
    });
    
    sunBtn.addEventListener('click', () => {
        html.classList.remove('dark');
        localStorage.setItem('theme', 'light');
        });

        </script>
</body>
</html>